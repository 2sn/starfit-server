{% extends "base.html" %}
{% block content %}
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>

<script type="text/javascript">
    function buttonCheck() {
        var boxes = document.getElementsByClassName('ifGa'),
            i = boxes.length;
        if (document.getElementById('ga').checked) { var hide = 'block' }
        else { var hide = 'none' }
        while (i--) { boxes[i].style.display = hide; }

        var boxes = document.getElementsByClassName('ifNotSingle'),
            i = boxes.length;
        if (document.getElementById('single').checked) { var hide = 'none' }
        else { var hide = 'block' }
        while (i--) { boxes[i].style.display = hide; }
    }
</script>

<script>
    $(document).ready(function () {
        $("#run").click(function () {
            $("#processing").css({ "display": "table" });
        });
    });
</script>

<div id="form">
    <form name="GAform" action="run" method="POST" enctype="multipart/form-data">
        <b>Algorithm</b>
        <table class="inputs">
            <tr>
                <td colspan="2">
                    <input class="algoButton" type="radio" name="algorithm" value="single" id="single"
                        checked="checked">Single Star
                    <input class="algoButton" type="radio" name="algorithm" value="ga" id="ga">Genetic
                    Algorithm
                    <input class="algoButton" type="radio" name="algorithm" value="double" id="double">Complete Binary
                    Search
                </td>
            </tr>
        </table>
        <div class="ifGa" style="display:none">
            <table class="inputs">
                <tr>
                    <td class="c1">
                        Time limit:
                    </td>
                    <td class="c2">
                        <input name="time_limit" type="number" value="5" />
                    </td>
                </tr>
                <tr>
                    <td>
                        Population size:
                    </td>
                    <td>
                        <input name="pop_size" type="number" value="200" />
                    </td>
                </tr>
                <tr>
                    <td>
                        Gene size (number of stars):
                    </td>
                    <td>
                        <input name="sol_size" type="number" value="2" />
                    </td>
                </tr>
            </table>
        </div>
        <br />
        <b>Fitting</b>
        <div class="ifNotSingle" style="display:none">
            <table class="inputs">
                <tr>
                    <td colspan="2">
                        <input type="radio" name="fixed" value="0" checked="checked">Free fitting
                        <input type="radio" name="fixed" value="1">Fixed offsets
                    </td>
                </tr>
            </table>
        </div>
        <table class="inputs">
            <tr>
                <td class="c1">
                    <a href="README.txt">Stellar data</a> (Leave blank for HE1327-2326):
                </td>
                <td>
                    <input name="stardata" type="file">
                </td>
            </tr>
            <tr>
                <td>
                    Model database:
                </td>
                <td>
                    <select id="db-dropdown" name="database">
                        {% for db in dblist %}
                        <option value="{{ db }}"> {{ dblist[db] }}</option>
                        {% endfor %}
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    Model lower limits:<br />
                    (comma separated element symbols)
                </td>
                <td>
                    <input type="text" name="z_lolim" value="Sc, Cu"><br>
                </td>
            </tr>
            <tr>
                <td>
                    Combine elements:
                </td>
                <td>
                    <select name="combine_mode">
                        <option value="0" checked="checked">None</option>
                        <option value="1">C+N</option>
                        <option value="2">C+N+O</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    Max Z:
                </td>
                <td>
                    <input name="z_max" type="number" value="30" />
                </td>
            </tr>
            <tr>
                <td>
                    Exclude elements:<br />
                    (comma separated element symbols)
                </td>
                <td>
                    <input type="text" name="z_exclude" value="Li, Cr, Zn"><br>
                </td>
            </tr>
            <tr>
                <td>
                    Upper limits CDF
                </td>
                <td>
                    <input type="checkbox" name="cdf" value="True">
                </td>
            </tr>
        </table>
        <br />
        <b>Output</b>
        <table class="inputs">
            <tr>
                <td class="c1">
                    Email (necessary for jobs longer than 1 minute):<br />
                    Includes data for plots.

                </td>
                <td>
                    <input name="email" type="text" />
                </td>
            </tr>
            <tr>
                <td>
                    Plot format (PDF will be mailed)
                </td>
                <td>
                    <select name="plotformat">
                        <option value="png" checked="checked">PNG</option>
                        <option value="svg">SVG</option>
                        <option value="jpg">JPG</option>
                        <option value="pdf">PDF</option>
                    </select>
                </td>
            </tr>
        </table>
        <br />
        <input type="submit" id="run" value="Run">
    </form>
</div>
{% endblock content %}
