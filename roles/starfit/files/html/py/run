#!/usr/bin/env python
print("Content-Type: text/html; charset=UTF-8\n")

import cgi
import cgitb
from datetime import datetime

cgitb.enable()

from job import compute_and_render
from utils import Config

start_time = datetime.now().strftime("%Y-%M-%d-%H-%M-%S")

forms = cgi.FieldStorage()  # Retrieve form fields
config = Config(forms, start_time)  # Validate form fields and generate config
page = compute_and_render(config, start_time)

# Print html to browser
print(page)
